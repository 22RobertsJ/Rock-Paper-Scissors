<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
        function upperFirst(string) {
            //Capitalises first letter of string
            return string.charAt(0).toUpperCase() + string.slice(1)
        }

        var computerSelection
        function computerPlay() {
            n = Math.floor(Math.random() * 3)

            if (n === 0) {
                return computerSelection = "rock"
            }

            else if (n === 1) {
                return computerSelection = "paper"
            }

            else {
                return computerSelection = "scissors"
            }
        }

        var playerSelection
        function playerPlay() {
            let choices = ["rock", "paper", "scissors"]
            let playerSelection = prompt("Rock, paper or scissors?").toLowerCase()

            if (choices.includes(playerSelection)) {
                console.log("You chose " + upperFirst(playerSelection))
                return playerSelection
            }

            else {
                console.log("Error, this choice isn't available")
                return false
            }
        }


        function playRound() {
            let playerSelection = playerPlay()

            if (playerSelection) {

                let computerSelection = computerPlay()
                switch (true) {

                    case computerSelection === "rock" && playerSelection === "paper":
                        console.log("You win! Paper beats rock")
                        return true
                        break

                    case computerSelection === "rock" && playerSelection === "scissors":
                        console.log("You lose! Rock beats scissors")
                        return false
                        break

                    case computerSelection === "paper" && playerSelection === "rock":
                        console.log("You lose! Paper beats rock")
                        return false
                        break

                    case computerSelection === "paper" && playerSelection === "scissors":
                        console.log("You win! Scissors beat paper")
                        return true
                        break

                    case computerSelection === "scissors" && playerSelection === "rock":
                        console.log("You win! Rock beats scissors")
                        return true
                        break

                    case computerSelection === "scissors" && playerSelection === "paper":
                        console.log("You lose! Scissors beat paper")
                        return false
                        break

                    case computerSelection === playerSelection:
                        console.log("It's a tie")
                        break
                }
            }
        }

        function game() {
            let computerScore = 0
            let playerScore = 0
            while (true) {
                let winner = playRound()

                if (winner === true) {
                    ++playerScore
                    console.log("You win the round, you have " + playerScore + " points.")
                }

                else if (winner === false) {
                    ++computerScore
                    console.log("You lost the round, the computer has " + computerScore + " points.")
                }

                if (playerScore === 3) {
                    console.log("You won the game! gg")
                    break
                }

                else if (computerScore === 3) {
                    console.log("You lost the game! gg")
                    break
                }
            }
        }
    </script>
</body>

</html>